<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Word Match</title>
    <script type="text/javascript" src="createjs-2013.12.12.min.js"></script>
    <script type="text/javascript" src="MontessoriTools.js"></script>

    <script>
        var stage;
        var list = [
                "baby", "bird", "boy", "cat", "dog", "girl", "apple", "car", "tractor"
        ];
        var words = [];
        var pictures = [];
        var num = 3;
        var img;
        var buttonWidth = 150;
        var buttonHeight = 40;

        // Move the button around when the mouse is clicked and held
        function pressMoveHandler(evt){
            evt.target.x = evt.stageX;
            evt.target.y = evt.stageY;
        }

        // Move the buttons into a row after the mouse is released
        function pressUpHandler() {
            words.sort(function(a, b) { return a.y - b.y});
            pictures.sort(function(a, b) { return a.y - b.y});
            positionArrays();
        }

        // Performs the actual move animation for the buttons
        function positionArrays() {
            var length = num;

            for(var i = 0; i < length; i++) {
                var posX = 50;
                var posY = i * 175 + 125;
                createjs.Tween.get(words[i]).to({x:posX},250).to({y:posY}, 250);
                posX = 250;
                posY = i * 175 + 75;
                createjs.Tween.get(pictures[i]).to({x:posX},250).to({y:posY}, 250);
            }
        }

        function submitButtonClickHandler() {

        }

        function newClockButtonClickHandler() {

        }

        function init() {
            stage = new createjs.Stage("canvas");
            createjs.Ticker.addEventListener("tick", stage);

            // Add instructions for the game to the top of the screen
            var instructions = new createjs.Text("Match the words and pictures:", "bold 25px Arial", "#0066CC");
            instructions.x = centerText(instructions);
            instructions.y = 20;
            stage.addChild(instructions);

            Shuffle(list);
            for(var i = 0; i < num; i++) {
                words[i] = new createjs.Bitmap("res/"+list[i]+"-word.jpg");
                words[i].name = list[i];
                words[i].x = 50;
                words[i].y = i * 175 + 125;
                words[i].on("pressmove", pressMoveHandler);
                words[i].on("pressup", pressUpHandler, "word");
                stage.addChild(words[i]);

                pictures[i] = new createjs.Bitmap("res/"+list[i]+"-image.jpg");
                pictures[i].name = list[i];
                pictures[i].x = 250;
                pictures[i].y = i * 175 + 75;
                pictures[i].on("pressmove", pressMoveHandler);
                pictures[i].on("pressup", pressUpHandler, "picture");
                stage.addChild(pictures[i]);
            }
//            Shuffle(words);
//            Shuffle(pictures);
            createSubmitButton(stage.canvas.width/2 - buttonWidth - 30, 3 * 175 + 75);
            createNewClockButton(stage.canvas.width/2 + 10, 3 * 175 + 75, "New Game");

            stage.update();
        }
    </script>
</head>
<body onLoad="init();">
<canvas id="canvas" width="480" height="640">
</canvas>
<!--<div>-->
    <!--<img src="cat.jpg">-->
<!--</div>-->
</body>
</html>