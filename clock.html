<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>

    <script>
        var stage, cont, min, hr, sec;
        var stageWidth = 640;
        var stageHeight = 480;
        var clockRadius = 150;

        function init() {
            stage = new createjs.Stage("demo"); // points to the canvas element in html body
            cont = stage.addChild(new createjs.Container()); // container to hold the clock
            cont.x = stage.canvas.width/2;
            cont.y = stage.canvas.height/2; // center the container

            // create the clock minute markers
            for(deg = 0; deg <= 360; deg+= 6) {
                var marker = new createjs.Shape();
                marker.graphics.beginFill("black").drawCircle(clockRadius,0,1);
                marker.rotation = deg; // draw markers for all 60 minutes
                cont.addChild(marker);
            }

            // the minute hand
            min = new createjs.Shape();
            min.graphics
                    .beginFill("black").drawRect(0,0, 135,5);
            min.on("pressmove", clickHandler, null, false, "min");
            cont.addChild(min);

            // the hour hand
            hr = new createjs.Shape();
            hr.graphics
                    .beginFill("black").drawRect(0,0, 75,7);
            hr.on("pressmove", clickHandler, null, false, "hour");
            cont.addChild(hr);
            drawNumbers();
            stage.update();
        }

        function drawNumbers(){
            var numbers=[1,2,3,4,5,6,7,8,9,10,11,12];

            function toRadians (angle) {
                return angle * (Math.PI / 180);
            }

            function place_numbers(number){
                var placement=((number%12/12)*360);
                var text=new createjs.Text(number.toString(),"25px Arial","#000");
                text.textBaseline="middle";
                text.textAlign="center";
                text.x=stage.canvas.width/2;
                text.y=stage.canvas.height/2;
                var r=170;
                var x=r*Math.sin(toRadians(placement));
                var y=r*Math.cos(toRadians(placement));
                console.log(number,placement,x,y);
                text.regX=-x;
                text.regY=y;
                stage.addChild(text);
                stage.update();
            }

            for (num in numbers)
                place_numbers(numbers[num]);
        }

        function clickHandler(event) {
            var dx = stage.mouseX - cont.x;
            var dy = stage.mouseY - cont.y;
            var angle = Math.atan2(dy, dx);

            angle = angle * (180/Math.PI);
            if(angle < 0)
            {
                angle = 360 - (-angle);
            }
            event.target.rotation = angle;
            stage.update();
        }

    </script>
</head>
<body onLoad="init();">
<canvas id="demo" width="480" height="640">
</canvas>
</body>
</html>